(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{312:function(t,e,n){"use strict";n.r(e);var a=n(5),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"微信界面结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#微信界面结构"}},[t._v("#")]),t._v(" 微信界面结构")]),t._v(" "),n("blockquote",[n("p",[t._v("WXML(WeiXin Markup Language) 是框架设计的一套标签语言，结合组件WXS和事件系统，可以构建出页面的结构。\n一个完整的语法是一个开始标签和结束标签组成，传入属性，属性名=属性值\n"),n("strong",[t._v("必须严格闭合，大小写敏感")]),t._v("\nWXML-----数据绑定，Mustache语法，变量加双括号，绑定数据\n可运算符绑定，字符串，扩展运算符绑定\n标签组件六中属性，id,class,style,hidden,data-*(自定义，组件上触发的属性，会发送给事件处理函数);")])]),t._v(" "),n("p",[t._v("-----列表渲染， wx:for,绑定数组;wx:for-item,数组中的当前元素；wx:key列表页面重新渲染，排序，\n（block包装元素，不会被重新渲染）")]),t._v(" "),n("p",[t._v("-----条件渲染， wx:if,wx:elif,wx:else(可使用===全等于判断)，频繁显示最好用hidden")]),t._v(" "),n("p",[t._v("-----模板引擎，template,定义is属性，data,传入模板数据信息；\n-----文件引用， import 只能引用模板定义好的模板，src,引入定义好的模板名字，有作用域概念，如果引用的模板有嵌套，不会渲染出来，避免模板引用死循环；\ninclude，目标文件内除模板代码块外的所有代码都引入，相当于拷贝到include位置；")]),t._v(" "),n("blockquote",[n("p",[t._v("WXSS(WeiXin Style Sheets),是一套样式语言，用于描述WXML的组件样式；（CSS-Cascading Style Sheets，是一套样式语言，样式表语言描述HTML或XML文档的呈现;"),n("br"),t._v("\n尺寸单位rpx -{\n设备像素（device pixels）\ncss像素(css pixels)\nPPI/DPI(pixel per inch) = Math.sqrt(x"),n("em",[t._v("x + y")]),t._v("y)/屏幕尺寸")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("DPR(devicepixelRatio)\n")])])]),n("p",[t._v("}")]),t._v(" "),n("p",[t._v("样式导入: @import, 执行顺序，从上到下，从左往右\n内联样式: 类似css通过内联style行内引入，\n可以在\n"),n("code",[t._v('<view style="background-color:'+t._s(t.colorValue)+";\"> Page({ data: { colorValue: 'red' } }),view中background-color变为红色;")])]),t._v(" "),n("blockquote",[n("p",[t._v("目前支持的选择器有：")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("选择器")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("样例")]),t._v(" "),n("th",{staticStyle:{"text-align":"right"}},[t._v("样例描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v(".class")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v(".intro")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v('选择所有class="intro"的组件')])]),t._v(" "),n("tr",[n("td",[t._v("#id")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("#firstname")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v('选择拥有id="firstname"的组件')])]),t._v(" "),n("tr",[n("td",[t._v("element")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("view")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("选择所有view组件")])]),t._v(" "),n("tr",[n("td",[t._v("element,element")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("view,checkbox")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("选择所有的view组件和所有checkbox组件")])]),t._v(" "),n("tr",[n("td",[t._v(":after")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("view::after")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("在view组件后边插入内容")])]),t._v(" "),n("tr",[n("td",[t._v(":before")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("view::before")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("在view组件前边插入内容")])])])]),t._v(" "),n("blockquote",[n("p",[t._v("优先级")])]),t._v(" "),n("ol",[n("li",[t._v("!important  选择器权重提升  ∞")]),t._v(" "),n("li",[t._v("style       标签内联   1000")]),t._v(" "),n("li",[t._v("#element    id    100")]),t._v(" "),n("li",[t._v(".element    元素class  10")]),t._v(" "),n("li",[t._v("element    元素标签   1")])]),t._v(" "),n("blockquote",[n("p",[t._v("微信小程序的开发框架 -- javaScript\nNodejs 中的JavaScript\nECMAScript Native(原生模块)  NPM (最大的包管理)\n小程序的JavaScript\nECMAScript 小程序框架  小程序API"),n("br"),t._v("\n(没有bom和dom对象的)\n浏览器中的JavaScript\nECMAScript DOM(当前网页对象)  BOM(浏览器窗口和框架，如改变浏览器URL)")])]),t._v(" "),n("p",[t._v("ECMAScript{\n语法\n类型\n语句\n关键字\n操作符\n对象\n}")]),t._v(" "),n("p",[t._v("IOS ->JavascriptCore\nandroid -> x5内核\nIDE -> nwjs ->ChormWebview渲染")]),t._v(" "),n("blockquote",[n("p",[t._v("WXS,微信script\n"),n("wxs",{attrs:{module:"m1"}},[t._v('\nmodule.exports = {\nmessage: "Hello word"\n}\n')])],1)]),t._v(" "),n("blockquote",[n("p",[t._v("底层MINA框架\nView  视图层 (和wxs在UI线程去做，避免夸线程处理的消耗)\nApp Service   逻辑层\nNative  系统层  ====== AST抽象语法树")])]),t._v(" "),n("blockquote",[n("p",[t._v("小程序运行机制")])]),t._v(" "),n("h3",{attrs:{id:"热启动，用户打开过，一定时间在打开，从缓存包中启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#热启动，用户打开过，一定时间在打开，从缓存包中启动"}},[t._v("#")]),t._v(" 热启动，用户打开过，一定时间在打开，从缓存包中启动")]),t._v(" "),n("h3",{attrs:{id:"冷启动-用户首次打开，或被主动销毁（5分钟），有新版本，异步下载最新包，下次打开可使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#冷启动-用户首次打开，或被主动销毁（5分钟），有新版本，异步下载最新包，下次打开可使用"}},[t._v("#")]),t._v(" 冷启动 用户首次打开，或被主动销毁（5分钟），有新版本，异步下载最新包，下次打开可使用")]),t._v(" "),n("blockquote",[n("p",[t._v("小程序运行机制--加载\nCDN内容分发网络，解决带宽和服务器延迟问题请求代码包，注入webview中，\n下次先从CDN请求最新的的代码包")])]),t._v(" "),n("blockquote",[n("p",[t._v("小程序应用和生命周期\nonLanuch\nonShow      globalData   程序生命周期\nonHide   (home键进入后台)\nonError")])]),t._v(" "),n("p",[t._v("页面生命周期 = { data当前小程序的数据\nonLoad\nonShow\nonReady 逻辑层 和视图层交互（页面渲染完成）\nonHide\nonUnload\n}")]),t._v(" "),n("blockquote",[n("p",[t._v("页面路由(6中)\n路由方式 | 触发时机 | 路由前页面 | 路由后页面")])]),t._v(" "),n("ul",[n("li",[t._v("| :-: | -: | -:\n初始化 |小程序打开的第一个页面| | onLoad,onShow\n打开新页面 |调用API wx.navigateTo或使用组件"),n("navigator",{attrs:{"open-type":"navigateTo"}},[t._v("| onHide| onLoad,onShow\n页面重定向 | 调用API wx.redirectTo或使用组件"),n("navigator",{attrs:{"open-type":"redirectTo"}},[t._v(" | onUnload | onLoad,onShow\n页面返回  |  调用API wx.navigateBack或使用组件"),n("navigator",{attrs:{"open-type":"navigateBack"}},[t._v("或用户按左上角返回按钮 | onUnload | onShow\nTab切换 | 调用API wx.switchTab或使用组件"),n("navigator",{attrs:{"open-type":"switchTab"}},[t._v("或用户切换Tab | |各种情况|\n重启动 |调用API wx.reLaunch或使用组件"),n("navigator",{attrs:{"open-type":"reLaunch"}},[t._v("| onUnload | onLoad,onShow")])],1)],1)],1)],1)],1)]),t._v(" "),n("blockquote",[n("p",[t._v("事件流\n"),n("view",{staticClass:"bnt",attrs:{bindtap:"clickMe"}}),t._v("\nPage({\nclickMe(e) {\nconsole.log(e);\n}\n})\n事件捕获阶段 = {\ntouchstart, touchmove,\ntouchcancel,touchend,tap,longpress,longtap\n}\n事件处理阶段\n事件冒泡阶段，从目标节点向上冒泡 = {\ntouchstart, touchmove, touchcancel,touchend,tap,longpress,\nlongtap,transitionend,animationstart,animationiteration,\nanimationend,touchforcechang\n}\nbindtap(绑定点击事件)----- 不会阻止事件的冒泡阶段\ncapture-bind:tap，绑定事件的的捕获阶段\ncapture-catch:tap，阻止对应的冒泡或捕获事件的调用")])]),t._v(" "),n("blockquote",[n("p",[t._v("view容器\n组件 视图层的基本组成单元\n媒体组件"),n("br"),t._v("\n地图组件\n开放能力\n画布\n视图容器,控制页面的内容= {\nview,scroll-view,swiper,movable-view,cover-view(加载原生组件)\n}\n基础内容\n表单组件\n导航\nscroll-view滚动容器\nswiper滑块\nmovable-view移动缩放容器\ncover-view原生视图容器，cover-image")])]),t._v(" "),n("blockquote",[n("p",[t._v("基础内容组件\nicon   -----图标\ntext  -----普通文本\nrich-text ----富文本\nprogress ---进度条\n表单组件\nbutton picker\ncheckbox  picker-view\nform radio\ninput switch\nlabel text-area\n媒体组件\naudio\nimage\nvideo\nlive-player,实时播放\ncamera\nlive-pusher,实时录制")])]),t._v(" "),n("blockquote",[n("p",[t._v("creatAnimation 创建动画，页面栈最多蹦容10个页面\nDPI设备像素比")])]),t._v(" "),n("blockquote",[n("p",[t._v("http 是基于TCP/IP通信协议通过万维网服务器传输数据到本地浏览器的应用层协议，单项通信，c/s架构，")])]),t._v(" "),n("blockquote",[n("p",[t._v("websocket 是由HTML5规范提出的一种在单个TCP连接上进行全双工通信的应用层协议，双向，SSL加密，微信中协议头wss,微信安全协议开头的，握手的时候通过http传输，传输数据时不需要")])]),t._v(" "),n("blockquote",[n("p",[t._v("content-position")])]),t._v(" "),n("blockquote",[n("p",[t._v("微信小程序开发框架-------API\n网络\n媒体\n文件\n数据缓存\n位置\n设备\n界面\n开放接口\n规则 = {\nwx.on\nobject参数\nwx.get/wx.set\n}")])]),t._v(" "),n("blockquote",[n("p",[t._v('webview 用来承载网页的容器\nopen-data 展示微信开放的数据{\ngroupName拉取的群名称\nopen-grid 当type="groupName"时生成的群id\n}\ncanvas 画布组件')])]),t._v(" "),n("blockquote",[n("p",[t._v("微信小程序登录流程\n小程序(miniprogram)={\nwx.login()获取code\nwx.request()发送code---S\nS---返回自定义登录状态\n自定义登录存入storage\nwx.request()发起业务请求携带，自定义登陆态\nS--------还会业务数据\n}\n开发者服务器(developer service) ={\nA----session_key +openid等自定义登录与openid  session_key关联\n}\n微信接口服务(wechat http api) = { appid有效期15分钟\n登录凭证校验接口 appid+appsecret+code\n}\nsession_key+openid加密，小程序端未知\n**code和session_key为一一对应的关系，session_key(和用户使用的频率成正比)有时效性")])]),t._v(" "),n("blockquote",[n("p",[t._v("核心功能--模板消息")])]),t._v(" "),n("h3",{attrs:{id:"推送位置，服务通知"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#推送位置，服务通知"}},[t._v("#")]),t._v(" 推送位置，服务通知")]),t._v(" "),n("h3",{attrs:{id:"下发条件-支付-提交表单"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下发条件-支付-提交表单"}},[t._v("#")]),t._v(" 下发条件 支付/提交表单")]),t._v(" "),n("h3",{attrs:{id:"跳转能力，小程序各个页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#跳转能力，小程序各个页面"}},[t._v("#")]),t._v(" 跳转能力，小程序各个页面")]),t._v(" "),n("blockquote",[n("p",[t._v("打开APP\n主动触发\n同一微信开放平台账号")])]),t._v(" "),n("p",[t._v("只支持分享至好友会话，不支持朋友圈")]),t._v(" "),n("p",[t._v("整个小程序运行期间\n1.从移动应用中分享出小程序类型的的消息卡片，获得打开App的能力，直接拉起App\n2.移动应用已经分享过小程序类型的消息卡片后\n已经分享出小程序应用卡片，在微信主界面的任务栏，\n或微信小程序的右上角的长按多任务的场景，button组件的opentype设置为launchApp\n客户端针对小程序进行相应的设置")]),t._v(" "),n("blockquote",[n("p",[t._v("overflow:hidde;可以隐藏移除的边框阴影")])])])}),[],!1,null,null,null);e.default=o.exports}}]);