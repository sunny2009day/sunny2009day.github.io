(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{322:function(t,s,a){"use strict";a.r(s);var r=a(5),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"本地环境win10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地环境win10"}},[t._v("#")]),t._v(" 本地环境win10")]),t._v(" "),a("ul",[a("li",[t._v("工作中有node端截图的需求,可以从canvas生成，但想渲染图表最方便其实是浏览器,尝试使用pupeteer")]),t._v(" "),a("li",[t._v("win10安装没有大问题，主要内置chromium,100多兆需要翻墙,使用公司vpn可以翻墙")]),t._v(" "),a("li",[t._v("如果不能,先避免下载chromium,手动下载,或切换淘宝镜像源,有内置chromium包")])]),t._v(" "),a("h2",{attrs:{id:"dockerfile部署到content-os-7的容器云上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile部署到content-os-7的容器云上"}},[t._v("#")]),t._v(" dockerfile部署到content os 7的容器云上")]),t._v(" "),a("ul",[a("li",[t._v("报错")])]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("puppeteer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("chromium"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("543305")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" error "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" loading shared libraries"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" libXss"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" cannot open shared object file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" No such file or directory\n")])])]),a("p",[t._v("找了一堆文档,主要是chromium没有launch起来,容器中查看puppeteer中有.local-chromium的文件夹,\n执行\n"),a("code",[t._v("ldd node_modules/puppeteer/.local-chromium/linux-737027/chrome-linux/chrome")]),t._v("动态列出依赖列表\n如下:")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[t._v("libpangocairo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" not found\nlibpango"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" not found\nlibcairo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" not found\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),a("p",[t._v("缺少很多依赖。。。\n坑啊")]),t._v(" "),a("ul",[a("li",[t._v("对于这种大型的库,看issue会有很多收货,比盲目网上找文章要快很多")]),t._v(" "),a("li",[t._v("甚至有人说,直接转phantomjs,在dockerfile中一股脑安装\n"),a("code",[t._v("RUN yum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y")]),t._v("\n可以截图了,但是截图中的中文乱码~")]),t._v(" "),a("li",[t._v("linux中缺少字体库,不管那个终端的库,截图都需要字体啊")])]),t._v(" "),a("h1",{attrs:{id:"安装仿宋体-容器是content-os"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装仿宋体-容器是content-os"}},[t._v("#")]),t._v(" 安装仿宋体,容器是content os")]),t._v(" "),a("p",[a("code",[t._v("RUN yum -y install bitmap-fonts bitmap-fonts-cjk")])]),t._v(" "),a("h1",{attrs:{id:"ubuntu-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-安装"}},[t._v("#")]),t._v(" ubuntu 安装")]),t._v(" "),a("p",[a("code",[t._v("apt-get install xfonts-wqy")])]),t._v(" "),a("ul",[a("li",[t._v("一般微软用雅黑字体比较多\n"),a("ul",[a("li",[t._v("在微软 "),a("code",[t._v("c:\\Windows\\Fonts")]),t._v("中找到微软雅黑字体,拷贝到docker目录中")]),t._v(" "),a("li",[t._v("每次build都copy")])]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[t._v("# 拷贝本地"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("app目录下src下微软雅黑到容器\n COPY src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("assets"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Fonts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("msyh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ttc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fonts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("msyh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ttc\n")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);